# Онлайн-тренажер тестов

## Возможности

- ✅ Регистрация и авторизация пользователей
- ✅ Прохождение тестов с одиночными и множественными ответами
- ✅ Гибкие настройки таймера (без таймера, на весь тест, на каждый вопрос)
- ✅ Просмотр правильных ответов после каждого вопроса
- ✅ Навигация по вопросам (возможность вернуться к предыдущим)
- ✅ Статистика по пройденным тестам
- ✅ Админ-панель для управления тестами
- ✅ Загрузка тестов из JSON файлов
- ✅ Поддержка изображений в вопросах

## Деплой на PythonAnywhere

### Шаг 1: Регистрация на PythonAnywhere

1. Перейдите на https://www.pythonanywhere.com
2. Создайте бесплатный аккаунт
3. Войдите в систему

### Шаг 2: Загрузка файлов

1. Откройте вкладку **Files**
2. Создайте новую директорию, например `quiz_trainer`
3. Загрузите все файлы проекта в эту директорию через кнопку **Upload a file**
   - Или используйте Git:
     - Откройте консоль Bash
     - Выполните: `git clone <ваш-репозиторий>`

### Шаг 3: Настройка виртуального окружения

1. Откройте консоль **Bash** (вкладка **Consoles**)
2. Создайте виртуальное окружение:
   ```bash
   cd quiz_trainer
   python3.10 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

### Шаг 4: Настройка Web приложения

1. Перейдите на вкладку **Web**
2. Нажмите **Add a new web app**
3. Выберите **Manual configuration**
4. Выберите **Python 3.10**
5. В разделе **Code**:
   - **Source code**: `/home/<ваш_username>/quiz_trainer`
   - **Working directory**: `/home/<ваш_username>/quiz_trainer`
   - **WSGI configuration file**: откройте файл и замените содержимое на:
   
   ```python
   import sys
   import os
   
   path = '/home/<ваш_username>/quiz_trainer'
   if path not in sys.path:
       sys.path.append(path)
   
   os.chdir(path)
   
   from app import app as application
   ```

6. В разделе **Virtualenv**:
   - Укажите путь: `/home/<ваш_username>/quiz_trainer/venv`

7. В разделе **Static files**:
   - URL: `/static/`
   - Directory: `/home/<ваш_username>/quiz_trainer/static`

8. Нажмите **Reload** в верхней части страницы

### Шаг 5: Инициализация базы данных

1. Откройте консоль Python (вкладка **Consoles**)
2. Выполните:
   ```python
   cd quiz_trainer
   source venv/bin/activate
   python
   >>> from app import init_db
   >>> init_db()
   >>> exit()
   ```

### Шаг 6: Проверка

Откройте ваш сайт: `https://<ваш_username>.pythonanywhere.com`

## Доступ к админ-панели

### Данные для входа по умолчанию:

- **URL**: `https://<ваш-сайт>/admin/login`
- **Логин**: `admin`
- **Пароль**: `admin123`

⚠️ **ВАЖНО**: Сразу после первого входа измените пароль!

### Как изменить пароль администратора:

1. Откройте консоль Python на PythonAnywhere
2. Выполните:
   ```python
   cd quiz_trainer
   source venv/bin/activate
   python
   >>> from werkzeug.security import generate_password_hash
   >>> new_hash = generate_password_hash('ваш_новый_пароль')
   >>> print(new_hash)
   ```
3. Скопируйте полученный хэш
4. Откройте файл `app.py`
5. Найдите строку:
   ```python
   ADMIN_PASSWORD_HASH = generate_password_hash('admin123')
   ```
6. Замените на:
   ```python
   ADMIN_PASSWORD_HASH = 'вставьте_скопированный_хэш'
   ```
7. Сохраните файл и перезагрузите приложение

## Использование админ-панели

### 1. Создание теста

1. Войдите в админ-панель
2. Нажмите **"+ Создать тест"**
3. Введите название и описание теста
4. Нажмите **"Создать тест"**

### 2. Загрузка вопросов из JSON

После создания теста:

1. Выберите JSON файл с вопросами
2. Нажмите **"Загрузить"**

### Формат JSON файла:

```json
{
  "questions": [
    {
      "text": "Текст вопроса",
      "order": 1,
      "is_multiple": false,
      "image": null,
      "answers": [
        {"text": "Вариант 1", "is_correct": true},
        {"text": "Вариант 2", "is_correct": false}
      ]
    }
  ]
}
```

**Поля:**
- `text` - текст вопроса (обязательно)
- `order` - порядковый номер вопроса (обязательно)
- `is_multiple` - множественный выбор (true/false)
- `image` - URL изображения или null
- `answers` - массив вариантов ответа (обязательно)
  - `text` - текст ответа
  - `is_correct` - правильный ли ответ (true/false)

### 3. Управление тестами

В админ-панели вы можете:
- **Включить/выключить** тест (кнопка "Включить"/"Выключить")
- **Удалить** тест (кнопка "Удалить")

## Использование для пользователей

### 1. Регистрация

1. Откройте главную страницу
2. Нажмите **"Начать бесплатно"** или **"Регистрация"**
3. Заполните форму регистрации
4. Нажмите **"Зарегистрироваться"**

### 2. Прохождение теста

1. Войдите в систему
2. Выберите тест из списка доступных
3. Настройте параметры таймера:
   - **Без таймера** - свободное прохождение
   - **Таймер на каждый вопрос** - 60 секунд на вопрос
   - **Таймер на весь тест** - укажите общее время
4. Нажмите **"Начать тест"**
5. Отвечайте на вопросы
6. Используйте навигацию:
   - Кнопки **"Предыдущий"** / **"Следующий"**
   - Номера вопросов внизу страницы
   - Кнопка **"Показать правильный ответ"**
7. Завершите тест кнопкой **"Завершить тест"**

### 3. Просмотр статистики

На главной странице после входа вы увидите:
- Количество пройденных тестов
- Средний результат
- Общее время обучения
- Последние результаты

## Структура проекта

```
quiz_trainer/
├── app.py                 # Основное Flask приложение
├── requirements.txt       # Зависимости Python
├── example_test.json      # Пример теста
├── static/
│   ├── css/
│   │   └── style.css     # Стили
│   ├── js/
│   │   ├── register.js   # Регистрация
│   │   ├── login.js      # Вход
│   │   ├── test.js       # Логика теста
│   │   ├── admin_login.js
│   │   ├── admin_panel.js
│   │   └── admin_create.js
│   └── uploads/          # Загруженные файлы
└── templates/
    ├── base.html
    ├── index.html
    ├── register.html
    ├── login.html
    ├── dashboard.html
    ├── test.html
    ├── admin_login.html
    ├── admin_panel.html
    └── admin_create_test.html
```

## База данных

Используется SQLite (файл `quiz_trainer.db`).

**Таблицы:**
- `users` - пользователи
- `tests` - тесты
- `questions` - вопросы
- `answers` - варианты ответов
- `test_results` - результаты тестов
- `user_answers` - ответы пользователей

## Возможные проблемы и решения

### Проблема: Приложение не запускается

**Решение:**
1. Проверьте логи на вкладке Web → Error log
2. Убедитесь, что виртуальное окружение настроено правильно
3. Проверьте пути в WSGI файле

### Проблема: База данных не создается

**Решение:**
1. Откройте консоль Bash
2. Выполните:
   ```bash
   cd quiz_trainer
   source venv/bin/activate
   python -c "from app import init_db; init_db()"
   ```

### Проблема: Статические файлы не загружаются

**Решение:**
1. Проверьте настройки Static files на вкладке Web
2. Убедитесь, что путь указан правильно
3. Нажмите Reload

## Технологии

- **Backend**: Python, Flask
- **Frontend**: HTML, CSS, Vanilla JavaScript
- **База данных**: SQLite
- **Хостинг**: PythonAnywhere

## Поддержка

При возникновении проблем проверьте:
1. Логи приложения (Error log в PythonAnywhere)
2. Консоль браузера (F12)
3. Настройки WSGI файла
4. Права доступа к файлам

## Лицензия

Свободное использование для личных и коммерческих целей.

---

## VPN Web Extension (загрузка своих конфигов)

В репозитории добавлено браузерное расширение в папке `vpn-extension/`.

### Что умеет
- Импорт пользовательских VPN/Proxy-конфигов из `.json` файла.
- Вставка конфига вручную через JSON на странице настроек.
- Хранение нескольких конфигов в `chrome.storage.local`.
- Быстрое подключение/отключение через popup.
- Удаление сохраненных конфигов.

### Формат пользовательского конфига

```json
{
  "name": "My VPN",
  "scheme": "socks5",
  "host": "10.0.0.1",
  "port": 1080,
  "bypassList": ["localhost", "127.0.0.1"]
}
```

### Как запустить расширение локально (Chrome/Chromium)
1. Откройте `chrome://extensions/`
2. Включите **Developer mode**
3. Нажмите **Load unpacked**
4. Выберите папку `vpn-extension`

После этого откройте popup расширения и страницу настроек (**Manage configs**) для загрузки своих конфигов.

> Важно: расширение управляет прокси-настройками браузера через `chrome.proxy`. Для полноценного VPN-туннеля обычно требуется отдельный VPN-клиент/бэкенд.
