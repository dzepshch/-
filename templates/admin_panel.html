{% extends "base.html" %}
{% set show_navbar = False %}

{% block content %}
<nav class="navbar">
    <div class="container">
        <a href="{{ url_for('admin_panel') }}" class="navbar-brand">üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
        <div class="navbar-menu">
            <a href="{{ url_for('admin_logout') }}" class="navbar-link">–í—ã—Ö–æ–¥</a>
        </div>
    </div>
</nav>

<div class="container" style="padding-top: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</h1>
        <a href="{{ url_for('admin_create_test') }}" class="btn btn-primary">+ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</a>
    </div>
    
    {% if tests %}
    <div class="card">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                    <th>–°–æ–∑–¥–∞–Ω</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for test in tests %}
                <tr>
                    <td>{{ test.id }}</td>
                    <td>{{ test.title }}</td>
                    <td>{{ test.description or '-' }}</td>
                    <td>{{ test.created_at[:10] }}</td>
                    <td>
                        <span style="color: {{ 'var(--primary-green)' if test.is_active else 'var(--text-secondary)' }}; font-weight: 500;">
                            {{ '–ê–∫—Ç–∏–≤–µ–Ω' if test.is_active else '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-secondary" onclick="toggleTest({{ test.id }})" style="padding: 0.375rem 0.75rem; margin-right: 0.5rem;">
                            {{ '–í—ã–∫–ª—é—á–∏—Ç—å' if test.is_active else '–í–∫–ª—é—á–∏—Ç—å' }}
                        </button>
                        <button class="btn btn-danger" onclick="deleteTest({{ test.id }})" style="padding: 0.375rem 0.75rem;">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="card">
        <p class="card-body">–¢–µ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç!</p>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/admin_panel.js') }}"></script>
{% endblock %}
